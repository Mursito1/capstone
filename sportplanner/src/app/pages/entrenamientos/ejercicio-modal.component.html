<ion-header class="modal-header-pro">
  <ion-toolbar>

    <ion-title>{{ ejercicio.nombre }}</ion-title>

    <ion-buttons slot="end">
      <ion-button class="cerrar-btn" (click)="cerrar()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

<ion-content class="modal-content-pro ion-padding">

  <!-- üåÑ Imagen -->
  <div class="gif-box-pro">
    <img [src]="ejercicio.imagen_gif" alt="{{ ejercicio.nombre }}" (error)="onGifError($event)" />
    <div class="gif-overlay"></div>
  </div>

  <!-- üìò Descripci√≥n -->
  <h2 class="section-title">Descripci√≥n</h2>
  <p class="texto-descripcion">
    {{ ejercicio.instructions || 'Sin descripci√≥n disponible.' }}
  </p>

  <!-- üü© Agregar a entrenamiento -->
  <h2 class="section-title">Agregar a entrenamiento</h2>

  <!-- ‚ö† Sin planes -->
  <ng-container *ngIf="planesUsuario && planesUsuario.length === 0; else listaPlanes">
    <p class="texto-vacio">No tienes planes creados a√∫n.</p>
  </ng-container>

  <!-- ‚úî Lista de planes -->
  <ng-template #listaPlanes>
    <ion-list class="lista-planes-pro">
      <ion-item class="plan-item-pro"
                *ngFor="let p of planesUsuario"
                (click)="agregarAEentrenamiento(p.plan.id)">
        <ion-label>
          <strong>{{ p.plan.nombre }}</strong>
          <p>{{ getDiaSemana(p.plan.dia_semana) }}</p>
        </ion-label>
      </ion-item>
    </ion-list>
  </ng-template>

  <!-- ‚ûï Crear plan -->
  <ion-button
    *ngIf="frecuenciaUsuario > 0 && planesUsuario.length < frecuenciaUsuario"
    expand="block"
    class="btn-pro"
    (click)="creando = !creando"
  >
    {{ creando ? 'Cancelar' : 'Crear nuevo plan' }}
  </ion-button>

  <!-- ‚ùå L√≠mite -->
  <p *ngIf="frecuenciaUsuario > 0 && planesUsuario.length >= frecuenciaUsuario"
     class="limite-msg-pro">
    Ya llegaste a tu l√≠mite semanal de entrenamientos.
  </p>

  <!-- üõ† Formulario crear plan -->
  <div *ngIf="creando" class="crear-plan-pro">
    <ion-item class="input-pro">
      <ion-input placeholder="Nombre del plan"
                 [(ngModel)]="nuevoPlan.nombre"></ion-input>
    </ion-item>

    <ion-item class="input-pro">
      <ion-select placeholder="D√≠a de la semana"
                  [(ngModel)]="nuevoPlan.dia_semana">
        <ion-select-option *ngFor="let d of [1,2,3,4,5,6,7]" [value]="d">
          {{ getDiaSemana(d) }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <ion-button expand="block" class="btn-verde-pro" (click)="crearPlan()">
      Guardar
    </ion-button>
  </div>

</ion-content>
