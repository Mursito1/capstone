<ion-header>
  <ion-toolbar>
    <ion-title>{{ ejercicio.nombre }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cerrar()">Cerrar</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="modal-content ion-padding">
  <div class="gif">
    <img [src]="ejercicio.imagen_gif" alt="{{ ejercicio.nombre }}" />
  </div>

  <h2>Descripci칩n</h2>
  <p>{{ ejercicio.descripcion || 'Sin descripci칩n disponible.' }}</p>

  <h2>Agregar a entrenamiento</h2>

  <!-- 游댳 Lista de planes existentes -->
  <div *ngIf="planesUsuario.length > 0">
    <ion-list>
      <ion-item *ngFor="let p of planesUsuario" (click)="agregarAEentrenamiento(p.plan.id)">
        <ion-label>
          {{ p.plan.nombre }} ({{ getDiaSemana(p.plan.dia_semana) }})
        </ion-label>
      </ion-item>
    </ion-list>
  </div>

  <!-- 游댳 Si no hay planes -->
  <div *ngIf="planesUsuario.length === 0">
    <p>No tienes planes de entrenamiento a칰n.</p>
  </div>

  <!-- 游릭 Siempre visible: bot칩n para crear nuevo plan -->
  <ion-button
    *ngIf="planesUsuario.length < frecuenciaUsuario"
    expand="block"
    color="primary"
    (click)="creando = !creando"
  >
    {{ creando ? 'Cancelar' : 'Crear nuevo plan' }}
  </ion-button>

  <!-- 游댮 Mensaje si ya lleg칩 al l칤mite -->
  <p *ngIf="planesUsuario.length >= frecuenciaUsuario" class="limite-msg">
    Ya tienes todos tus entrenamientos semanales asignados.
  </p>

  <!-- 游댳 Formulario para crear nuevo plan -->
  <div *ngIf="creando" class="crear-plan">
    <ion-item>
      <ion-input placeholder="Nombre del plan" [(ngModel)]="nuevoPlan.nombre"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">D칤a de la semana</ion-label>
      <ion-select [(ngModel)]="nuevoPlan.dia_semana">
        <ion-select-option [value]="1">Lunes</ion-select-option>
        <ion-select-option [value]="2">Martes</ion-select-option>
        <ion-select-option [value]="3">Mi칠rcoles</ion-select-option>
        <ion-select-option [value]="4">Jueves</ion-select-option>
        <ion-select-option [value]="5">Viernes</ion-select-option>
        <ion-select-option [value]="6">S치bado</ion-select-option>
        <ion-select-option [value]="7">Domingo</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-button expand="block" color="success" (click)="crearPlan()">
      Guardar
    </ion-button>
  </div>
</ion-content>
