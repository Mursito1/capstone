<ion-header>
  <ion-toolbar>
    <ion-title>Entrenamientos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="entrenamientos-page ion-padding">

  <!-- ✅ Skeleton mientras carga -->
  <ng-container *ngIf="cargando">
    <ion-card *ngFor="let item of [1,2,3]" class="skeleton-card">
      <ion-card-header>
        <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
        <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
      </ion-card-header>

      <ion-card-content>
        <div class="gif-placeholder">
          <ion-skeleton-text animated style="height: 150px; width: 100%;"></ion-skeleton-text>
        </div>

        <ion-button expand="block" disabled>
          <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
        </ion-button>
      </ion-card-content>
    </ion-card>
  </ng-container>


  <!-- ✅ Recomendación -->
  <div *ngIf="!cargando && deporteRecomendado" class="recomendacion-header">
    <h2>Recomendados para <strong>{{ deporteRecomendado }}</strong></h2>
    <p class="nivel-texto">Nivel: <strong>{{ nivelRecomendado }}</strong></p>
  </div>


  <!-- ✅ Cards -->
  <!-- ✅ Cards horizontales -->
  <div *ngIf="!cargando && entrenamientos.length > 0" class="cards-horizontal">

    <ion-card *ngFor="let e of entrenamientos; trackBy: trackById" class="entrenamiento-card-horizontal">

      <div class="card-inner">

        <!-- GIF izquierda -->
        <div class="gif-side">
          <img 
            loading="lazy"
            [src]="e.imagen_gif"
            alt="GIF del ejercicio {{ e.nombre }}"
            (error)="onGifError($event)"
          />
        </div>

        <!-- Texto derecha -->
        <div class="info-side">
          <h3 class="titulo">{{ e.nombre }}</h3>
          <p class="sub">{{ e.deporte }} • {{ e.nivel }}</p>

          <ion-button shape="round" size="small" class="btn-revisar" (click)="abrirModal(e)">
            Revisar
          </ion-button>
        </div>

      </div>

    </ion-card>

  </div>



  <!-- ✅ Mensaje vacío -->
  <ion-row *ngIf="!cargando && entrenamientos.length === 0" class="no-entrenamientos">
    <ion-col size="12" class="text-center">
      <ion-icon name="sad-outline" class="icono-vacio"></ion-icon>
      <p>No hay entrenamientos recomendados para tu perfil.</p>
    </ion-col>
  </ion-row>

</ion-content>
