<ion-header class="header-pro">
  <ion-toolbar>
    <ion-title>Ejercicios</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="entrenamientos-page ion-padding">

  <!-- ðŸ”˜ Toggle IA -->
  <div class="toggle-ia-container">
    <div class="toggle-pro">
      <div class="toggle-info">
        <span class="toggle-title">Recomendaciones con IA</span>
        <span class="toggle-desc" *ngIf="usarIA">Personalizado a tu perfil</span>
        <span class="toggle-desc warn" *ngIf="!usarIA">Mostrando ejercicios generales</span>
      </div>

      <ion-toggle [(ngModel)]="usarIA" (ionChange)="cambiarModo()"></ion-toggle>
    </div>
  </div>

  <!-- â³ Skeleton -->
  <ng-container *ngIf="cargando">
    <ion-card *ngFor="let item of [1,2,3]" class="skeleton-card">
      <ion-card-header>
        <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
        <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
      </ion-card-header>

      <ion-card-content>
        <div class="gif-placeholder">
          <ion-skeleton-text animated style="height: 170px; width: 100%;"></ion-skeleton-text>
        </div>

        <ion-button expand="block" disabled>
          <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
        </ion-button>
      </ion-card-content>
    </ion-card>
  </ng-container>

  <!-- â­ RecomendaciÃ³n IA -->
  <div *ngIf="!cargando && usarIA && deporteRecomendado" class="recomendacion-pro">
    <div class="rec-inner">
      <h2>Recomendados para <strong>{{ deporteRecomendado }}</strong></h2>
      <span class="nivel">Nivel: {{ nivelRecomendado }}</span>
    </div>
  </div>

  <!-- ðŸ“‹ Cards ULTRA PRO -->
  <div *ngIf="!cargando && entrenamientos.length > 0" class="cards-pro">

    <ion-card *ngFor="let e of entrenamientos" class="ej-pro-card">
      <div class="ej-img-box">
        <img [src]="e.imagen_gif" alt="GIF" (error)="onGifError($event)" />
        <div class="img-overlay"></div>
      </div>

      <div class="ej-content">
        <h3 class="ej-title">{{ e.nombre }}</h3>
        <p class="ej-sub">{{ e.deporte }} â€¢ {{ e.nivel }}</p>

        <div class="ej-footer">
          <div class="ej-badge" *ngIf="usarIA">Recomendado por IA</div>
          <ion-button size="small" shape="round" class="btn-ver" (click)="abrirModal(e)">
            Revisar
          </ion-button>
        </div>
      </div>
    </ion-card>

  </div>

  <!-- ðŸ˜¢ Vacio -->
  <ion-row *ngIf="!cargando && entrenamientos.length === 0" class="no-entrenamientos">
    <ion-col size="12" class="text-center">
      <ion-icon name="sad-outline" class="icono-vacio"></ion-icon>
      <p>No hay ejercicios disponibles.</p>
    </ion-col>
  </ion-row>

</ion-content>
